(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var i={},a={app:0},n=[];function s(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=i,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},a707:function(t,e,r){"use strict";var i=r("f727"),a=r.n(i);a.a},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),a=(r("d3b7"),r("bc3a")),n=r.n(a),s={},o=n.a.create(s);o.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),o.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=o,window.axios=o,Object.defineProperties(t.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},i["a"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{staticStyle:{"background-color":"#E3F2FD"}},[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("h1",[t._v("AdmitAd test")])]),r("v-main",[r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{staticClass:"fill-height mx-3"},[r("v-col",{staticClass:"pt-3",attrs:{cols:"3"}},[r("Configurator",{attrs:{"is-log-loading":t.isLogLoading},on:{"api-post-new-ticket":t.submitNewTicket,"api-send-log-file":t.uploadLogFile}})],1),r("v-col",{staticClass:"pt-0",attrs:{cols:"9"}},[r("TicketBoard",{attrs:{tickets:t.tickets}})],1)],1)],1)],1)],1)},l=[],u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"fill-height",attrs:{outlined:"","min-width":"300px",tile:""}},[r("v-card-title",{staticClass:"justify-center"},[t._v(" Параметры отчета ")]),r("v-row",{staticClass:"justify-center"},[r("v-col",{attrs:{cols:"10"}},[r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{dense:"",label:"Начало периода","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.requestParams.start_from_date,callback:function(e){t.$set(t.requestParams,"start_from_date",e)},expression:"requestParams.start_from_date"}},"v-text-field",a,!1),i))]}}]),model:{value:t.periodStartPicker,callback:function(e){t.periodStartPicker=e},expression:"periodStartPicker"}},[r("v-date-picker",{on:{input:function(e){t.periodStartPicker=!1}},model:{value:t.requestParams.start_from_date,callback:function(e){t.$set(t.requestParams,"start_from_date",e)},expression:"requestParams.start_from_date"}})],1)],1)],1),r("v-row",{staticClass:"justify-center my-0"},[r("v-col",{staticClass:"my-0",attrs:{cols:"10"}},[r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[r("v-text-field",t._g(t._b({attrs:{dense:"",label:"Конец периода","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.requestParams.until,callback:function(e){t.$set(t.requestParams,"until",e)},expression:"requestParams.until"}},"v-text-field",a,!1),i))]}}]),model:{value:t.periodEndPicker,callback:function(e){t.periodEndPicker=e},expression:"periodEndPicker"}},[r("v-date-picker",{on:{input:function(e){t.periodEndPicker=!1}},model:{value:t.requestParams.until,callback:function(e){t.$set(t.requestParams,"until",e)},expression:"requestParams.until"}})],1)],1)],1),r("v-row",{staticClass:"justify-center my-0"},[r("v-col",{staticClass:"my-0",attrs:{cols:"10"}},[r("v-select",{attrs:{outlined:"",items:t.servicePicker,label:"Кэшбэк сервис"},model:{value:t.requestParams.service_domain,callback:function(e){t.$set(t.requestParams,"service_domain",e)},expression:"requestParams.service_domain"}}),r("v-checkbox",{attrs:{dense:"",label:"Пересчитать, если существует"},model:{value:t.requestParams.recalculate_if_exists,callback:function(e){t.$set(t.requestParams,"recalculate_if_exists",e)},expression:"requestParams.recalculate_if_exists"}})],1)],1),r("v-row",{staticClass:"pb-4",attrs:{justify:"center"}},[r("v-btn",{attrs:{color:"primary",disabled:!(t.requestParams.until.length>0&&t.requestParams.start_from_date.length>0&&t.requestParams.service_domain.length>0)},on:{click:t.requestNewTicket}},[t._v(" Отправить запрос ")])],1),r("v-divider"),r("v-card-subtitle",{staticClass:"text-center text-lg-h6"},[t._v(" Загрузка логов ")]),r("v-row",{staticClass:"justify-center align-center my-0"},[r("v-col",{staticClass:"justify-center align-center my-0",attrs:{cols:"10"}},[r("v-file-input",{staticClass:"my-0",attrs:{type:"file",accept:"application/json, text/*",placeholder:"Выберите файл",label:"Лог"},model:{value:t.logFileForUpload,callback:function(e){t.logFileForUpload=e},expression:"logFileForUpload"}})],1)],1),r("v-row",{staticClass:"pb-4",attrs:{justify:"center"}},[r("v-btn",{attrs:{color:"primary",disabled:!t.logFileForUpload,loading:t.isLogLoading},on:{click:t.sendLogFileToServer}},[t._v(" Загрузить лог ")])],1)],1)},d=[],p=(r("b0c0"),i["a"].extend({name:"Configurator",data:function(){return{requestParams:{start_from_date:"",until:"",service_domain:"ours.com",recalculate_if_exists:!1},logFileForUpload:null,servicePicker:["ours.com","theirs1.com","theirs2.com"],periodStartPicker:!1,periodEndPicker:!1}},props:{isLogLoading:Boolean},methods:{requestNewTicket:function(){this.$emit("api-post-new-ticket",this.requestParams)},sendLogFileToServer:function(){if(null!==this.logFileForUpload){var t=this.logFileForUpload,e=new FormData;e.append("file",t,t.name),this.$emit("api-send-log-file",e)}else alert("Файл не выбран!")}}})),f=p,v=r("2877"),m=r("6544"),h=r.n(m),_=r("8336"),k=r("b0af"),b=r("99d9"),g=r("ac7c"),y=r("62ad"),C=r("2e4b"),w=r("ce7e"),P=r("23a7"),x=r("e449"),T=r("0fd9"),j=r("b974"),V=r("8654"),F=Object(v["a"])(f,u,d,!1,null,null,null),q=F.exports;h()(F,{VBtn:_["a"],VCard:k["a"],VCardSubtitle:b["b"],VCardTitle:b["c"],VCheckbox:g["a"],VCol:y["a"],VDatePicker:C["a"],VDivider:w["a"],VFileInput:P["a"],VMenu:x["a"],VRow:T["a"],VSelect:j["a"],VTextField:V["a"]});var L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{staticClass:"justify-center fill-height"},[r("v-col",{staticClass:"fill-height",attrs:{cols:"6"}},[r("v-card",{staticClass:"fill-height scroll",staticStyle:{"overflow-y":"scroll"},attrs:{color:"#F5F5F5",width:"100%"}},[r("v-card-title",[t._v(" Отчеты ")]),r("v-divider"),r("v-list",{attrs:{color:"#F5F5F5"}},t._l(t.tickets,(function(e,i){return r("v-list-item",{key:i},[r("v-list-item-content",[r("ReportTicket",{attrs:{"report-ticket":e},on:{"api-check-for-completion":function(r){return t.getIfCompleted(e.id)},"display-report":t.displayReport}})],1)],1)})),1)],1)],1),r("v-col",{staticClass:"fill-height",attrs:{cols:"6"}},[0===t.selectedTicket.report_entries.length?r("v-card",{staticClass:"fill-height"},[r("v-skeleton-loader",{staticClass:"fill-height",attrs:{type:"card",width:"100%"}})],1):t._e(),t.selectedTicket.report_entries.length>0?r("v-card",{staticClass:"fill-height"},[r("v-card-title",[t._v("Идентификатор отчета: "+t._s(t.selectedTicket.id))]),r("v-simple-table",{staticClass:"scroll"},[r("thead",[r("tr",[r("th",[t._v("Client id")]),r("th",[t._v("Cashback reference")])])]),r("tbody",t._l(t.selectedTicket.report_entries,(function(e,i){return r("tr",{key:i},[r("td",[t._v(t._s(e.user_id))]),r("td",[t._v(t._s(e.winner))])])})),0)])],1):t._e()],1)],1)},O=[],S=(r("7db0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{attrs:{outlined:"",elevation:"4"}},[r("v-card-title",[t._v(" Идентификатор: "+t._s(t.reportTicket.id)+" ")]),r("v-divider"),r("v-card-subtitle",[t._v(" Дата создания: "+t._s(this.reportTicket.created_time)+" ")]),r("v-card-subtitle",[t._v(" Начало периода отчета: "+t._s(t.reportTicket.period_start)+" ")]),r("v-card-subtitle",[t._v(" Конец периода отчета: "+t._s(t.reportTicket.period_end)+" ")]),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{color:"primary"},on:{click:t.checkForCompletion}},[t._v(" Проверить готовность ")]),r("v-btn",{attrs:{color:"primary",disabled:!t.reportTicket.is_completed},on:{click:t.showReport}},[t._v(" Отобразить ")])],1)],1)}),R=[],$=i["a"].extend({name:"ReportTicket",props:{reportTicket:{type:Object}},methods:{checkForCompletion:function(){this.$emit("api-check-for-completion",this.reportTicket.id)},showReport:function(){this.$emit("display-report",this.reportTicket)}}}),E=$,B=Object(v["a"])(E,S,R,!1,null,null,null),I=B.exports;h()(B,{VBtn:_["a"],VCard:k["a"],VCardActions:b["a"],VCardSubtitle:b["b"],VCardTitle:b["c"],VDivider:w["a"]});r("96cf");var U=r("1da1"),A=r("d4ec"),D=r("bee2"),M={withCredentials:!1,timeout:3e4,baseURL:"http://localhost:8081/api",responseType:"json",headers:{common:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Accept:"application/json"}}},N=function(){function t(){Object(A["a"])(this,t),this.client=n.a.create(M)}return Object(D["a"])(t,[{key:"submitTicket",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.client.post("tickets",e,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){return alert(t),null})));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTicketByIdIfCompleted",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.client.get("tickets/".concat(e)).then((function(t){return 202===t.status?null:t.data})).catch((function(t){return alert(t),null})));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"submitLogFile",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.client.put("uploader/log",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){return!0})).catch((function(t){return alert(t),!1})));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),J=i["a"].extend({name:"TicketBoard",components:{ReportTicket:I},data:function(){return{api:new N,selectedTicket:{id:-1,created_time:"",service_domain:"",period_start:"",period_end:"",is_completed:!1,report_entries:[]}}},props:{tickets:{type:Object}},methods:{displayReport:function(t){0===t.report_entries.length?alert("В отчете нет записей"):this.selectedTicket=t},getIfCompleted:function(t){var e=this;this.api.getTicketByIdIfCompleted(t).then((function(r){if(r){var i=e.tickets.find((function(e){return e.id===t}));i.is_completed=r.is_completed,i.report_entries=r.report_entries}}))}}}),z=J,G=(r("a707"),r("8860")),H=r("da13"),K=r("5d23"),Q=r("1f4f"),W=r("3129"),X=Object(v["a"])(z,L,O,!1,null,"43e01768",null),Y=X.exports;h()(X,{VCard:k["a"],VCardTitle:b["c"],VCol:y["a"],VDivider:w["a"],VList:G["a"],VListItem:H["a"],VListItemContent:K["a"],VRow:T["a"],VSimpleTable:Q["a"],VSkeletonLoader:W["a"]});var Z=i["a"].extend({name:"App",components:{Configurator:q,TicketBoard:Y},props:{},methods:{submitNewTicket:function(t){var e=this;this.api.submitTicket(t).then((function(t){t&&e.tickets.push(t)}))},uploadLogFile:function(t){this.isLogLoading=!0,this.api.submitLogFile(t).then((function(t){return t})).catch((function(t){return alert(t)})),this.isLogLoading=!1}},data:function(){return{api:new N,tickets:[],isLogLoading:!1}}}),tt=Z,et=r("7496"),rt=r("40dc"),it=r("a523"),at=r("f6c4"),nt=Object(v["a"])(tt,c,l,!1,null,null,null),st=nt.exports;h()(nt,{VApp:et["a"],VAppBar:rt["a"],VCol:y["a"],VContainer:it["a"],VMain:at["a"],VRow:T["a"]});var ot=r("f309");i["a"].use(ot["a"]);var ct=new ot["a"]({});i["a"].config.productionTip=!1,new i["a"]({vuetify:ct,render:function(t){return t(st)}}).$mount("#app")},f727:function(t,e,r){}});
//# sourceMappingURL=app.40507f07.js.map